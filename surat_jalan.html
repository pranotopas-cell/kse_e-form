<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surat Jalan Digital - Khatulistiwa Sinar Energi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root {
            --primary-green: #006400; 
            --accent-tosca: #00af91;  
            --light-bg: #f0f9f7;
        }

        body { 
            font-family: 'Arial', sans-serif; 
            font-size: 10pt; 
            margin: 0; 
            padding: 20px; 
            background-color: #525659; 
            color: #000;
            display: flex; 
            gap: 20px;
            justify-content: center;
            align-items: flex-start;
        }
        
        #sj-container {
            width: 210mm; 
            height: 297mm; 
            padding: 10mm 12mm; 
            background: white; 
            position: relative; 
            box-sizing: border-box;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            display: flex; 
            flex-direction: column;
            overflow: hidden;
            flex-shrink: 0;
        }

        .val { 
            font-weight: bold; 
            font-size: 9.5pt; 
            display: inline-block; 
            margin-top: 2px;
            white-space: nowrap; 
            overflow: hidden;
            max-width: 100%;
        }

        .page-footer-border { position: absolute; bottom: 0; left: 0; width: 100%; height: 12px; background: #222; }
        .accent-box { position: absolute; bottom: 0; right: 0; display: flex; }
        .accent-green { width: 45px; height: 12px; background: var(--primary-green); transform: skewX(-30deg); margin-right: -5px; }
        .accent-tosca-bar { width: 45px; height: 12px; background: var(--accent-tosca); transform: skewX(-30deg); }

        .system-qr-footer { position: absolute; bottom: 25px; left: 12mm; display: flex; align-items: center; gap: 10px; }
        #qrcode { background: white; padding: 2px; border: 1px solid #eee; }
        .system-info-text { font-size: 7pt; line-height: 1.2; color: #333; }

        .header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .logo-area { display: flex; align-items: center; gap: 15px; }
        .main-logo { height: 75px; width: auto; }
        
        /* Pembaruan: Teks rata kiri dan PT dihilangkan */
        .logo-text { display: flex; flex-direction: column; justify-content: center; }
        .logo-text b { font-size: 17pt; line-height: 1.1; color: var(--primary-green); text-align: left; }
        .logo-text span { font-size: 13pt; color: var(--accent-tosca); font-weight: bold; letter-spacing: 1px; text-align: left; }
        
        .company-address { font-size: 8.5pt; margin-top: 8px; line-height: 1.4; width: 55%; }
        
        .meta-info-grid { 
            text-align: right; 
            font-size: 8.5pt; 
            width: 40%; 
            margin-top: 8px;
        }
        .meta-info-grid table { width: auto; margin-left: auto; border-collapse: collapse; }
        .meta-info-grid td { vertical-align: top; padding: 2px 0; text-align: left; }
        .meta-label { font-weight: bold; width: 115px; }
        .meta-val { font-weight: bold; color: #000; }

        .title-block { text-align: center; margin: 35px 0 20px 0; color: #000; }
        /* Pembaruan: Judul Delivery Order warna hitam */
        .title-block h1 { font-size: 20pt; margin: 0; text-decoration: underline; font-weight: bold; letter-spacing: 2px; color: #000; }
        .title-block p { margin: 5px 0 0 0; font-size: 11pt; font-weight: bold; color: #333; }

        .main-table { width: 100%; border-top: 2.5px solid var(--primary-green); border-bottom: 2.5px solid var(--primary-green); border-collapse: collapse; margin-bottom: 15px; table-layout: fixed; }
        .main-table td { padding: 6px 4px; vertical-align: top; border-bottom: 0.5px solid #eee; overflow: hidden; }
        .label-group { display: flex; flex-direction: column; }
        .label-id { font-weight: bold; font-size: 9pt; color: #000; }
        .label-en { font-style: italic; font-size: 7.5pt; color: #555; margin-top: -1px; }

        .desc-section { display: flex; gap: 20px; margin-top: 10px; }
        .desc-table { width: 60%; border-collapse: collapse; table-layout: fixed; }
        .desc-table td { border: 1px solid #ccc; padding: 6px; background: #fcfcfc; font-size: 8.5pt; overflow: hidden; }
        .note-box { width: 40%; font-size: 8pt; font-style: italic; line-height: 1.4; border: 1px dashed var(--accent-tosca); padding: 10px; background: var(--light-bg); }

        .sig-table { width: 100%; border-collapse: collapse; margin-top: 30px; table-layout: fixed; }
        .sig-table th, .sig-table td { border: 1px solid #000; text-align: center; padding: 5px; width: 33.33%; }
        .sig-table th { background: var(--light-bg); font-size: 9pt; padding: 8px 5px; }
        .sig-table td { height: 105px; vertical-align: bottom; font-weight: bold; font-size: 9.5pt; padding-bottom: 10px; position: relative; }
        .stamp-container { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); width: 135px; z-index: 1; opacity: 0.90; pointer-events: none; }

        .other-note-container { 
            width: 100%; 
            border: 1px solid #000; 
            border-top: none; 
            padding: 6px 10px; 
            font-size: 8pt; 
            min-height: 45px; 
            box-sizing: border-box;
            background: #fff;
            text-align: left;
        }

        .editor-panel { 
            width: 380px; 
            padding: 20px; 
            background: #fff; 
            border-radius: 8px; 
            border: 1px solid #ddd;
            max-height: 95vh;
            overflow-y: auto;
            position: sticky;
            top: 20px;
        }
        .editor-panel h2 { margin: 18px 0 8px 0; color: var(--primary-green); font-size: 11pt; border-bottom: 2px solid var(--accent-tosca); padding-bottom: 5px; }
        .field { display: flex; flex-direction: column; margin-bottom: 10px; }
        .field label { font-size: 8pt; font-weight: bold; margin-bottom: 4px; color: #444; }
        input, textarea { padding: 8px; border: 1px solid #bbb; border-radius: 4px; font-size: 9pt; font-family: inherit; }
        
        .action-group { display: flex; flex-direction: column; gap: 10px; margin-top: 25px; }
        .btn { width: 100%; padding: 14px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; font-size: 10pt; color: white; }
        .btn-print { background: var(--primary-green); }
        .btn-preview { background: #555; }
        .btn-download { background: #2e7d32; }

        @media print {
            .editor-panel { display: none; }
            body { background: none; padding: 0; display: block; }
            #sj-container { box-shadow: none; margin: 0; border: none; padding: 10mm 12mm; }
        }
    </style>
</head>
<body>

<div class="editor-panel">
    <h2>1. Informasi Header</h2>
    <div class="field"><label>Tanggal Dokumen (Date)</label><input type="text" id="i-tgl" value="09 Februari 2026"></div>
    <div class="field"><label>Nomor Surat Jalan</label><input type="text" id="i-no" value="001/SJ-KSE/II/2026"></div>
    <div class="field"><label>Tujuan (To)</label><input type="text" id="i-po-to" value="PT. "></div>
    <div class="field"><label>Lokasi Header (Location)</label><input type="text" id="i-lokasi" value="Pangkalan Bun"></div>

    <h2>2. Tabel Rincian Utama</h2>
    <div class="field"><label>Transportir (Transporter)</label><input type="text" id="i-trans" value="-"></div>
    <div class="field"><label>Produk (Product)</label><input type="text" id="i-prod" value="BBM Solar Industri"></div>
    <div class="field"><label>Nomor DO (DO Number)</label><input type="text" id="i-do-desc" value="-"></div>
    <div class="field"><label>Volume / Kapasitas (L)</label><input type="text" id="i-vol" value="-"></div>
    <div class="field"><label>Nomor SO (SO Number)</label><input type="text" id="i-so-desc" value="-"></div>
    <div class="field"><label>Tanggal Pengaliran (Loading Date)</label><input type="text" id="i-load-date" value="-"></div>
    <div class="field"><label>Nomor Polisi (Plat No)</label><input type="text" id="i-plat" value="-"></div>
    <div class="field"><label>Meter Awal / TC (mm)</label><input type="text" id="i-m1" value="-"></div>
    <div class="field"><label>Meter Akhir / TC (mm)</label><input type="text" id="i-m2" value="-"></div>
    <div class="field"><label>Nomor Segel (Seal No)</label><input type="text" id="i-segel" value="-"></div>
    <div class="field"><label>Tinggi Cairan (T2)</label><input type="text" id="i-t2" value="-"></div>

    <h2>3. Deskripsi Pesanan</h2>
    <div class="field"><label>Nomor Purchase Order (PO)</label><input type="text" id="i-po-num" value="-"></div>
    <div class="field"><label>PO Quantity (L)</label><input type="text" id="i-poqty" value="-"></div>

    <h2>4. Pengesahan & Catatan Lain</h2>
    <div class="field"><label>Nama Pengemudi (Driver)</label><input type="text" id="i-driver" value="-"></div>
    <div class="field"><label>Nama Manager</label><input type="text" id="i-mgr" value="RISKY DANDY SAPUTRA"></div>
    <div class="field"><label>Other Note (Catatan Tambahan)</label><textarea id="i-other-note" rows="2" placeholder="Tulis catatan tambahan di sini..."></textarea></div>

    <div class="action-group">
        <button class="btn btn-preview" onclick="window.scrollTo(0,0)">PREVIEW</button>
        <button class="btn btn-print" onclick="window.print()">PRINT / CETAK</button>
        <button class="btn btn-download" onclick="downloadPDF()">DOWNLOAD PDF</button>
    </div>
</div>

<div id="sj-container">
    <div class="header">
        <div class="logo-area">
            <img src="header1.png" alt="Logo KSE" class="main-logo">
            <div class="logo-text">
                <b>KHATULISTIWA</b>
                <span>SINAR ENERGI</span>
            </div>
        </div>
    </div>
    
    <div class="header">
        <div class="company-address">
            Jln. H.M Rafi'i Rt.24 Pangkalan Bun<br>
            Kotawaringin Barat, Kalimantan Tengah<br>
            <span style="color:var(--primary-green); font-weight:bold; text-decoration:underline">pt.khatilistiwa sinar .energi@gmail.com</span>
        </div>
        <div class="meta-info-grid">
            <table>
                <tr><td class="meta-label">Tanggal / <i style="font-weight:normal">Date</i></td><td>: <span id="v-tgl" class="meta-val"></span></td></tr>
                <tr><td class="meta-label">No. Surat Jalan</td><td>: <span id="v-no" class="meta-val"></span></td></tr>
                <tr><td class="meta-label">Tujuan / <i style="font-weight:normal">To</i></td><td>: <span id="v-po-to-header" class="meta-val"></span></td></tr>
                <tr><td class="meta-label">Lokasi / <i style="font-weight:normal">Location</i></td><td>: <span id="v-lokasi" class="meta-val"></span></td></tr>
            </table>
        </div>
    </div>

    <div class="title-block">
        <h1>DELIVERY ORDER</h1>
        <p>SURAT JALAN</p>
    </div>

    <table class="main-table">
        <tr>
            <td width="20%"><div class="label-group"><span class="label-id">Transportir</span><span class="label-en">Transporter</span></div></td>
            <td width="20%">: <span class="val" id="v-trans">-</span></td>
            <td width="20%"><div class="label-group"><span class="label-id">Produk</span><span class="label-en">Product</span></div></td>
            <td>: <span class="val" id="v-prod">BBM Solar Industri</span></td>
        </tr>
        <tr>
            <td><div class="label-group"><span class="label-id">Nomor DO</span><span class="label-en">DO Number</span></div></td>
            <td>: <span class="val" id="v-do-top">-</span></td>
            <td><div class="label-group"><span class="label-id">Volume</span><span class="label-en">Capacity</span></div></td>
            <td>: <span class="val"><span id="v-vol">-</span> Liter</span></td>
        </tr>
        <tr>
            <td><div class="label-group"><span class="label-id">Nomor SO</span><span class="label-en">SO Number</span></div></td>
            <td>: <span class="val" id="v-so-top">-</span></td>
            <td><div class="label-group"><span class="label-id">Dikirim Via</span><span class="label-en">Delivery By</span></div></td>
            <td>: <span class="val">Fuel Truck (Mobil Tangki)</span></td>
        </tr>
        <tr>
            <td><div class="label-group"><span class="label-id">Tgl Pengaliran</span><span class="label-en">Loading Date</span></div></td>
            <td>: <span class="val" id="v-load">-</span></td>
            <td><div class="label-group"><span class="label-id">Nomor Polisi</span><span class="label-en">Police Plat Number</span></div></td>
            <td>: <span class="val" id="v-plat">-</span></td>
        </tr>
        <tr>
            <td><div class="label-group"><span class="label-id">Meter Awal (TC)</span><span class="label-en">Initial Meter</span></div></td>
            <td>: <span class="val" id="v-m1">-</span> mm</td>
            <td><div class="label-group"><span class="label-id">Meter Akhir (TC)</span><span class="label-en">Final Meter</span></div></td>
            <td>: <span class="val" id="v-m2">-</span></td>
        </tr>
        <tr>
            <td><div class="label-group"><span class="label-id">Nomor Segel</span><span class="label-en">Seal Number</span></div></td>
            <td>: <span class="val" id="v-segel">-</span></td>
            <td><div class="label-group"><span class="label-id">Tinggi Cairan (T2)</span><span class="label-en">High Liquid Level</span></div></td>
            <td>: <span class="val" id="v-t2">-</span> mm</td>
        </tr>
        <tr>
            <td><div class="label-group"><span class="label-id">Tujuan</span><span class="label-en">Destination</span></div></td>
            <td colspan="3">: <span class="val" id="v-dest-table">-</span></td>
        </tr>
    </table>

    <div style="font-weight:bold; font-size:9.5pt; margin-top:5px; margin-bottom: 5px;">DESCRIPTION NOTE / <i style="font-weight: normal;">Catatan Keterangan</i></div>
    <div class="desc-section">
        <table class="desc-table">
            <tr>
                <td width="45%">
                    <b>Purchase Order to:</b><br>
                    <i style="font-size: 7.5pt;">Nomor PO / PO Number:</i>
                </td>
                <td>: <span class="val" id="v-po-num">-</span></td>
            </tr>
            <tr>
                <td><b>Sales Order No.</b> / <i style="font-size: 7.5pt;">Nomor SO</i></td>
                <td>: <span class="val" id="v-so-desc">-</span></td>
            </tr>
            <tr>
                <td><b>PO Quantity</b> / <i style="font-size: 7.5pt;">Jumlah Pesanan</i></td>
                <td>: <span class="val" id="v-poqty">-</span> L</td>
            </tr>
        </table>
        <div class="note-box" id="v-notetext">
            Note: Dengan ditanda tanganinya surat ini, menandakan bahwa produk sudah diterima dalam keadaan kualitas dan kuantitas yang baik.
        </div>
    </div>

    <table class="sig-table">
        <tr>
            <th><span class="label-id">Penerima</span><br><span class="label-en">Received By</span></th>
            <th><span class="label-id">Pengemudi</span><br><span class="label-en">Driver</span></th>
            <th><span class="label-id">Manager Operasional</span><br><span class="label-en">Operational Manager</span></th>
        </tr>
        <tr>
            <td><span id="v-penerima">( . . . . . . . . . . . . . . . . )</span></td>
            <td><span id="v-driver">-</span></td>
            <td>
                <img src="stempel.png" alt="Stempel KSE" class="stamp-container">
                <div style="position:relative; z-index:2;">
                    <br><br>
                    <span id="v-mgr">RISKY DANDY SAPUTRA</span>
                </div>
            </td>
        </tr>
    </table>

    <div class="other-note-container">
        <b>Other Note:</b> <span id="v-other-note"></span>
    </div>

    <div class="system-qr-footer">
        <div id="qrcode"></div>
        <div class="system-info-text">
            <b>E-System Surat Jalan KSE</b><br>
            <i>Digital Verification Secure System</i>
        </div>
    </div>
    <div class="page-footer-border"></div>
    <div class="accent-box"><div class="accent-green"></div><div class="accent-tosca-bar"></div></div>
</div>

<script>
    var qrcode = new QRCode(document.getElementById("qrcode"), { width: 45, height: 45 });

    function fitText(el, defaultSize) {
        if(!el) return;
        let size = defaultSize;
        el.style.fontSize = size + 'pt';
        while (el.scrollWidth > el.offsetWidth && size > 5) {
            size -= 0.5;
            el.style.fontSize = size + 'pt';
        }
    }

    function upd() {
        document.getElementById('v-no').innerText = document.getElementById('i-no').value;
        document.getElementById('v-tgl').innerText = document.getElementById('i-tgl').value;
        document.getElementById('v-lokasi').innerText = document.getElementById('i-lokasi').value;
        document.getElementById('v-prod').innerText = document.getElementById('i-prod').value;
        document.getElementById('v-trans').innerText = document.getElementById('i-trans').value;
        document.getElementById('v-vol').innerText = document.getElementById('i-vol').value;
        document.getElementById('v-plat').innerText = document.getElementById('i-plat').value;
        document.getElementById('v-segel').innerText = document.getElementById('i-segel').value;
        document.getElementById('v-m1').innerText = document.getElementById('i-m1').value;
        document.getElementById('v-m2').innerText = document.getElementById('i-m2').value;
        document.getElementById('v-t2').innerText = document.getElementById('i-t2').value;
        document.getElementById('v-load').innerText = document.getElementById('i-load-date').value;
        
        const ptTujuan = document.getElementById('i-po-to').value;
        document.getElementById('v-po-to-header').innerText = ptTujuan;
        document.getElementById('v-dest-table').innerText = ptTujuan;
        
        document.getElementById('v-po-num').innerText = document.getElementById('i-po-num').value;
        document.getElementById('v-do-top').innerText = document.getElementById('i-do-desc').value;
        document.getElementById('v-so-top').innerText = document.getElementById('i-so-desc').value;
        document.getElementById('v-so-desc').innerText = document.getElementById('i-so-desc').value;
        document.getElementById('v-poqty').innerText = document.getElementById('i-poqty').value;
        document.getElementById('v-driver').innerText = document.getElementById('i-driver').value;
        document.getElementById('v-mgr').innerText = document.getElementById('i-mgr').value;
        
        document.getElementById('v-other-note').innerText = document.getElementById('i-other-note').value;
        
        document.querySelectorAll('.val').forEach(el => fitText(el, 9.5));
        
        qrcode.clear();
        qrcode.makeCode("KSE-VERIFIED-" + document.getElementById('i-no').value);
    }

    function downloadPDF() {
        const element = document.getElementById('sj-container');
        const noSJ = document.getElementById('i-no').value.replace(/\//g, '-');
        const ptTujuan = document.getElementById('i-po-to').value.replace(/\s/g, '_');
        window.scrollTo(0, 0);
        const opt = {
            margin: 0,
            filename: 'Surat_Jalan_' + noSJ + '_' + ptTujuan + '.pdf',
            image: { type: 'jpeg', quality: 1 },
            html2canvas: { scale: 2, useCORS: true, scrollY: 0, windowHeight: element.scrollHeight },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save();
    }

    document.querySelectorAll('input, textarea').forEach(el => el.addEventListener('input', upd));
    upd();
</script>
</body>
</html>


